extends layout

block content
    h1= reference.title
    a(href="/") â—€ Return to listing
    p= reference

    button.btn#export Export BibTex

    textarea.hidden.bibtex-container#bibtex(rows="8", cols="60", readonly)

    h3 Reference tags
    section#reference-tags
        if empty(reference.tags)
            p No reference tags
        else
            table
                tr
                    th Tags
                each line in reference.tags
                    tr
                        td= line.tags

    h3 Add tag
    section#tag-addition
        form(action="/ref/#{reference.id}/tag", method="POST")
            input#tag(name="tag" type="text" placeholder="Type your tag here" size="60")
            input.btn.inline-btn(type="submit", value="Add")

    script.
        $(document).ready(() => {
            $("#export").click(() => {
                $("#bibtex").load(location.pathname + "/bibtex", () => $("#bibtex").removeClass("hidden"))
            });
        });
